<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Slot Deutsch - Ultimate Edition</title>
    <style>

        /* Credit link styles */
    .credits { font-size:11px; color:var(--muted); margin-top:6px; text-align:center; width:100%; }
    .credits a { color:var(--accent); text-decoration:none; opacity:0.8; transition:opacity .2s; }
    .credits a:hover { opacity:1; text-decoration:underline; }
        :root {
            --bg: #0b1020;
            --card: #12192d;
            --muted: #a0aec0;
            --text: #e7ecff;
            --ok: #36c689;
            --bad: #ff6470;
            --der: #4b8bff;   /* Blue */
            --die: #ff6cae;   /* Pink */
            --das: #ffd84b;   /* Yellow */
            --border: #24335c;
            --accent: #a3a9ff;
        }


        
        * { box-sizing: border-box; }
        body {
            margin: 0; font-family: system-ui, -apple-system, sans-serif;
            background: radial-gradient(circle at top, #161d33 0%, #0b1020 100%);
            color: var(--text);
            min-height: 100vh; display: flex; flex-direction: column; align-items: center;
            overflow: hidden;
        }

        header { width: 100%; max-width: 900px; padding: 20px; display: flex; justify-content: space-between; align-items: center; }
        
        .controls-top { display: flex; gap: 10px; align-items: center; }
        
        .level-select {
            background: #1a2340; border: 1px solid var(--border); color: var(--accent);
            padding: 8px 12px; border-radius: 999px; font-size: 13px; font-weight: bold;
            cursor: pointer; outline: none;
        }

        .pill { background: #1a2340; border: 1px solid var(--border); color: var(--text); padding: 8px 16px; border-radius: 999px; font-size: 13px; cursor: pointer; }
        
        main { width: 100%; max-width: 900px; display: grid; grid-template-columns: 1fr 320px; gap: 24px; padding: 20px; }
        @media (max-width: 800px) { main { grid-template-columns: 1fr; overflow-y: auto; } }

        .stage {
            position: relative;
            height: 520px;
            background: #080c18;
            border-radius: 32px;
            border: 3px solid var(--border);
            overflow: hidden;
            box-shadow: inset 0 0 80px rgba(0,0,0,0.9);
        }

        .stage::before, .stage::after {
            content: ""; position: absolute; left: 0; right: 0; height: 120px; z-index: 10; pointer-events: none;
        }
        .stage::before { top: 0; background: linear-gradient(to bottom, #080c18 0%, transparent 100%); }
        .stage::after { bottom: 0; background: linear-gradient(to top, #080c18 0%, transparent 100%); }

        .reel-container { position: relative; width: 100%; height: 100%; }

        .slot-unit {
            position: absolute;
            left: 0; right: 0; height: 140px;
            display: flex; flex-direction: row; align-items: center; justify-content: center;
            transition: all 0.6s cubic-bezier(0.25, 1, 0.5, 1);
            font-weight: 800;
        }

        @keyframes shake {
            0%, 100% { transform: translateY(190px) translateX(0); }
            20%, 60% { transform: translateY(190px) translateX(-15px); }
            40%, 80% { transform: translateY(190px) translateX(15px); }
        }
        .shake-active { animation: shake 0.3s ease-in-out; }

        .slot-unit.pos-next { transform: translateY(20px) scale(0.95); filter: blur(1.5px) brightness(0.5); opacity: 0.5; }
        .slot-unit.pos-active { transform: translateY(190px) scale(1); filter: blur(0) brightness(1); opacity: 1; font-size: 52px; }
        .slot-unit.pos-prev { transform: translateY(360px) scale(0.95); filter: blur(1.5px) brightness(0.7); opacity: 0.7; font-size: 40px; }
        .slot-unit.pos-exit { transform: translateY(550px) scale(0.8); opacity: 0; filter: blur(4px); }

        .article-reveal {
            opacity: 0; max-width: 0; display: inline-block; overflow: hidden;
            transition: opacity 0.3s ease, max-width 0.4s ease; white-space: nowrap; margin-right: 0; font-size: inherit;
        }

        .resolved .article-reveal { opacity: 1; max-width: 250px; margin-right: 15px; }

        .controls-area { margin-top: 30px; text-align: center; }
        .btnrow { display: flex; gap: 12px; justify-content: center; margin-bottom: 20px; }
        .btn {
            flex: 1; max-width: 120px; padding: 18px; border-radius: 20px; 
            border: 3px solid var(--border); background: #172142; color: #fff; 
            font-size: 18px; font-weight: 800; cursor: pointer; transition: 0.2s;
        }
        .btn.der:hover { border-color: var(--der); box-shadow: 0 0 15px var(--der); }
        .btn.die:hover { border-color: var(--die); box-shadow: 0 0 15px var(--die); }
        .btn.das:hover { border-color: var(--das); box-shadow: 0 0 15px var(--das); }

        .stat-box { background: var(--card); border: 1px solid var(--border); padding: 20px; border-radius: 20px; margin-bottom: 12px; }
        .stat-label { font-size: 11px; color: var(--muted); text-transform: uppercase; }
        .stat-value { font-size: 28px; font-weight: 800; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="credits">
    Created by Ruslan Lomaka &nbsp;|&nbsp; 
    <a href="https://www.linkedin.com/in/ruslan-lomaka/" target="_blank">LinkedIn</a> &nbsp;|&nbsp; 
    <a href="https://github.com/RuslanLomaka/DerDieDasDrill" target="_blank">GitHub Repo</a>
  </div>

<header>
    <h2 style="color:var(--accent); margin:0;">Slot <span style="font-weight: 300;">Deutsch</span></h2>
    <div class="controls-top">
        <select class="level-select" id="levelSelector">
            <option value="A1">Level A1 (Basic)</option>
            <option value="A2">Level A2 (Daily)</option>
            <option value="B1">Level B1 (Interm.)</option>
            <option value="B2">Level B2 (Pro)</option>
            <option value="ALL">Mix All</option>
        </select>
        <button class="pill" onclick="location.reload()">Reset</button>
    </div>
</header>

<main>
    <section>
        <div class="stage">
            <div id="reel" class="reel-container"></div>
        </div>
        <div class="controls-area">
            <div class="btnrow">
                <button class="btn der" onclick="handleChoice('der')">der</button>
                <button class="btn die" onclick="handleChoice('die')">die</button>
                <button class="btn das" onclick="handleChoice('das')">das</button>
            </div>
        </div>
    </section>

    <aside>
        <div class="stat-box">
            <div class="stat-label">Richtig / Falsch</div>
            <div class="stat-value"><span id="scoreOk" style="color:var(--ok)">0</span> / <span id="scoreBad" style="color:var(--bad)">0</span></div>
        </div>
        <div class="stat-box">
            <div class="stat-label">Streak</div>
            <div class="stat-value" id="streak" style="color:var(--accent)">0</div>
        </div>
        <div class="stat-box" style="font-size: 13px; color: var(--muted); line-height: 1.6;">
            <b style="color:var(--text)">Vokabeln im Deck:</b><br>
            <span id="levelCount">0</span> Wörter geladen.
        </div>
    </aside>
</main>

<script>
const rawData = [
    // --- LEVEL A1 (The Basics) ---
    {w:"Abend", a:"der", l:"A1"}, {w:"Adresse", a:"die", l:"A1"}, {w:"Apfel", a:"der", l:"A1"},
    {w:"Arm", a:"der", l:"A1"}, {w:"Arzt", a:"der", l:"A1"}, {w:"Auge", a:"das", l:"A1"},
    {w:"Auto", a:"das", l:"A1"}, {w:"Bad", a:"das", l:"A1"}, {w:"Bahnhof", a:"der", l:"A1"},
    {w:"Bank", a:"die", l:"A1"}, {w:"Bett", a:"das", l:"A1"}, {w:"Bild", a:"das", l:"A1"},
    {w:"Blume", a:"die", l:"A1"}, {w:"Brief", a:"der", l:"A1"}, {w:"Brot", a:"das", l:"A1"},
    {w:"Buch", a:"das", l:"A1"}, {w:"Bus", a:"der", l:"A1"}, {w:"Butter", a:"die", l:"A1"},
    {w:"Computer", a:"der", l:"A1"}, {w:"Dank", a:"der", l:"A1"}, {w:"Dienstag", a:"der", l:"A1"},
    {w:"Ding", a:"das", l:"A1"}, {w:"Donnerstag", a:"der", l:"A1"}, {w:"Dorf", a:"das", l:"A1"},
    {w:"Durst", a:"der", l:"A1"}, {w:"Ei", a:"das", l:"A1"}, {w:"Eis", a:"das", l:"A1"},
    {w:"Eltern", a:"die", l:"A1"}, {w:"Familie", a:"die", l:"A1"}, {w:"Farbe", a:"die", l:"A1"},
    {w:"Fahrrad", a:"das", l:"A1"}, {w:"Fehler", a:"der", l:"A1"}, {w:"Fenster", a:"das", l:"A1"},
    {w:"Film", a:"der", l:"A1"}, {w:"Fisch", a:"der", l:"A1"}, {w:"Flasche", a:"die", l:"A1"},
    {w:"Fleisch", a:"das", l:"A1"}, {w:"Flughafen", a:"der", l:"A1"}, {w:"Flugzeug", a:"das", l:"A1"},
    {w:"Foto", a:"das", l:"A1"}, {w:"Frage", a:"die", l:"A1"}, {w:"Frau", a:"die", l:"A1"},
    {w:"Freitag", a:"der", l:"A1"}, {w:"Freund", a:"der", l:"A1"}, {w:"Frühstück", a:"das", l:"A1"},
    {w:"Fuß", a:"der", l:"A1"}, {w:"Garten", a:"der", l:"A1"}, {w:"Geld", a:"das", l:"A1"},
    {w:"Gemüse", a:"das", l:"A1"}, {w:"Geschenk", a:"das", l:"A1"}, {w:"Glas", a:"das", l:"A1"},
    {w:"Gott", a:"der", l:"A1"}, {w:"Haar", a:"das", l:"A1"}, {w:"Hand", a:"die", l:"A1"},
    {w:"Haus", a:"das", l:"A1"}, {w:"Herr", a:"der", l:"A1"}, {w:"Hund", a:"der", l:"A1"},
    {w:"Hunger", a:"der", l:"A1"}, {w:"Hotel", a:"das", l:"A1"}, {w:"Hut", a:"der", l:"A1"},
    {w:"Idee", a:"die", l:"A1"}, {w:"Jacke", a:"die", l:"A1"}, {w:"Jahr", a:"das", l:"A1"},
    {w:"Junge", a:"der", l:"A1"}, {w:"Kaffee", a:"der", l:"A1"}, {w:"Karte", a:"die", l:"A1"},
    {w:"Katze", a:"die", l:"A1"}, {w:"Kind", a:"das", l:"A1"}, {w:"Kino", a:"das", l:"A1"},
    {w:"Klasse", a:"die", l:"A1"}, {w:"Kleidung", a:"die", l:"A1"}, {w:"Kopf", a:"der", l:"A1"},
    {w:"Küche", a:"die", l:"A1"}, {w:"Kuchen", a:"der", l:"A1"}, {w:"Land", a:"das", l:"A1"},
    {w:"Lehrer", a:"der", l:"A1"}, {w:"Licht", a:"das", l:"A1"}, {w:"Lied", a:"das", l:"A1"},
    {w:"Mädchen", a:"das", l:"A1"}, {w:"Mann", a:"der", l:"A1"}, {w:"Mantel", a:"der", l:"A1"},
    {w:"Markt", a:"der", l:"A1"}, {w:"Meer", a:"das", l:"A1"}, {w:"Mensch", a:"der", l:"A1"},
    {w:"Milch", a:"die", l:"A1"}, {w:"Mittwoch", a:"der", l:"A1"}, {w:"Monat", a:"der", l:"A1"},
    {w:"Montag", a:"der", l:"A1"}, {w:"Morgen", a:"der", l:"A1"}, {w:"Musik", a:"die", l:"A1"},
    {w:"Mutter", a:"die", l:"A1"}, {w:"Name", a:"der", l:"A1"}, {w:"Nacht", a:"die", l:"A1"},
    {w:"Nummer", a:"die", l:"A1"}, {w:"Obst", a:"das", l:"A1"}, {w:"Park", a:"der", l:"A1"},
    {w:"Party", a:"die", l:"A1"}, {w:"Platz", a:"der", l:"A1"}, {w:"Polizei", a:"die", l:"A1"},
    {w:"Preis", a:"der", l:"A1"}, {w:"Problem", a:"das", l:"A1"}, {w:"Radio", a:"das", l:"A1"},
    {w:"Regen", a:"der", l:"A1"}, {w:"Restaurant", a:"das", l:"A1"}, {w:"Salz", a:"das", l:"A1"},
    {w:"Samstag", a:"der", l:"A1"}, {w:"Schlüssel", a:"der", l:"A1"}, {w:"Schuh", a:"der", l:"A1"},
    {w:"Schule", a:"die", l:"A1"}, {w:"Schwester", a:"die", l:"A1"}, {w:"See", a:"der", l:"A1"},
    {w:"Sofa", a:"das", l:"A1"}, {w:"Sommer", a:"der", l:"A1"}, {w:"Sonne", a:"die", l:"A1"},
    {w:"Sonntag", a:"der", l:"A1"}, {w:"Spaß", a:"der", l:"A1"}, {w:"Sport", a:"der", l:"A1"},
    {w:"Sprache", a:"die", l:"A1"}, {w:"Stadt", a:"die", l:"A1"}, {w:"Straße", a:"die", l:"A1"},
    {w:"Stuhl", a:"der", l:"A1"}, {w:"Tag", a:"der", l:"A1"}, {w:"Taxi", a:"das", l:"A1"},
    {w:"Tee", a:"der", l:"A1"}, {w:"Teppich", a:"der", l:"A1"}, {w:"Tisch", a:"der", l:"A1"},
    {w:"Tochter", a:"die", l:"A1"}, {w:"Tür", a:"die", l:"A1"}, {w:"Uhr", a:"die", l:"A1"},
    {w:"Vater", a:"der", l:"A1"}, {w:"Vogel", a:"der", l:"A1"}, {w:"Wasser", a:"das", l:"A1"},
    {w:"Weg", a:"der", l:"A1"}, {w:"Wein", a:"der", l:"A1"}, {w:"Welt", a:"die", l:"A1"},
    {w:"Wetter", a:"das", l:"A1"}, {w:"Woche", a:"die", l:"A1"}, {w:"Wohnung", a:"die", l:"A1"},
    {w:"Wort", a:"das", l:"A1"}, {w:"Zeit", a:"die", l:"A1"}, {w:"Zeitung", a:"die", l:"A1"},
    {w:"Zimmer", a:"das", l:"A1"}, {w:"Zug", a:"der", l:"A1"},

    // --- LEVEL A2 (Daily Life, Work, Environment) ---
    {w:"Abschluss", a:"der", l:"A2"}, {w:"Ahnung", a:"die", l:"A2"}, {w:"Ampel", a:"die", l:"A2"},
    {w:"Angebot", a:"das", l:"A2"}, {w:"Anfang", a:"der", l:"A2"}, {w:"Angst", a:"die", l:"A2"},
    {w:"Anzug", a:"der", l:"A2"}, {w:"Apotheke", a:"die", l:"A2"}, {w:"Arbeit", a:"die", l:"A2"},
    {w:"Ausbildung", a:"die", l:"A2"}, {w:"Ausflug", a:"der", l:"A2"}, {w:"Ausgang", a:"der", l:"A2"},
    {w:"Ausland", a:"das", l:"A2"}, {w:"Ausweis", a:"der", l:"A2"}, {w:"Bäckerei", a:"die", l:"A2"},
    {w:"Balkon", a:"der", l:"A2"}, {w:"Bekannte", a:"der", l:"A2"}, {w:"Berg", a:"der", l:"A2"},
    {w:"Beruf", a:"der", l:"A2"}, {w:"Besuch", a:"der", l:"A2"}, {w:"Bewerbung", a:"die", l:"A2"},
    {w:"Bier", a:"das", l:"A2"}, {w:"Brille", a:"die", l:"A2"}, {w:"Brücke", a:"die", l:"A2"},
    {w:"Büro", a:"das", l:"A2"}, {w:"Chef", a:"der", l:"A2"}, {w:"Dach", a:"das", l:"A2"},
    {w:"Dauer", a:"die", l:"A2"}, {w:"Drucker", a:"der", l:"A2"}, {w:"Durst", a:"der", l:"A2"},
    {w:"Dusche", a:"die", l:"A2"}, {w:"Eingang", a:"der", l:"A2"}, {w:"Einladung", a:"die", l:"A2"},
    {w:"Ende", a:"das", l:"A2"}, {w:"Erfahrung", a:"die", l:"A2"}, {w:"Ergebnis", a:"das", l:"A2"},
    {w:"Erlaubnis", a:"die", l:"A2"}, {w:"Erwachsene", a:"der", l:"A2"}, {w:"Fahrer", a:"der", l:"A2"},
    {w:"Fahrkarte", a:"die", l:"A2"}, {w:"Feier", a:"die", l:"A2"}, {w:"Feuer", a:"das", l:"A2"},
    {w:"Fieber", a:"das", l:"A2"}, {w:"Firma", a:"die", l:"A2"}, {w:"Flur", a:"der", l:"A2"},
    {w:"Fluss", a:"der", l:"A2"}, {w:"Friseur", a:"der", l:"A2"}, {w:"Führerschein", a:"der", l:"A2"},
    {w:"Geburtstag", a:"der", l:"A2"}, {w:"Gefahr", a:"die", l:"A2"}, {w:"Gefühl", a:"das", l:"A2"},
    {w:"Gegenteil", a:"das", l:"A2"}, {w:"Gehalt", a:"das", l:"A2"}, {w:"Geschäft", a:"das", l:"A2"},
    {w:"Geschichte", a:"die", l:"A2"}, {w:"Gesicht", a:"das", l:"A2"}, {w:"Gespräch", a:"das", l:"A2"},
    {w:"Gewicht", a:"das", l:"A2"}, {w:"Glück", a:"das", l:"A2"}, {w:"Größe", a:"die", l:"A2"},
    {w:"Hals", a:"der", l:"A2"}, {w:"Hafen", a:"der", l:"A2"}, {w:"Hälfte", a:"die", l:"A2"},
    {w:"Handy", a:"das", l:"A2"}, {w:"Heimat", a:"die", l:"A2"}, {w:"Heizung", a:"die", l:"A2"},
    {w:"Hemd", a:"das", l:"A2"}, {w:"Herd", a:"der", l:"A2"}, {w:"Hilfe", a:"die", l:"A2"},
    {w:"Hobby", a:"das", l:"A2"}, {w:"Holz", a:"das", l:"A2"}, {w:"Hose", a:"die", l:"A2"},
    {w:"Hund", a:"der", l:"A2"}, {w:"Insel", a:"die", l:"A2"}, {w:"Instrument", a:"das", l:"A2"},
    {w:"Internet", a:"das", l:"A2"}, {w:"Interview", a:"das", l:"A2"}, {w:"Job", a:"der", l:"A2"},
    {w:"Jugendliche", a:"der", l:"A2"}, {w:"Kamera", a:"die", l:"A2"}, {w:"Karte", a:"die", l:"A2"},
    {w:"Kartoffel", a:"die", l:"A2"}, {w:"Keller", a:"der", l:"A2"}, {w:"Kiosk", a:"der", l:"A2"},
    {w:"Koffer", a:"der", l:"A2"}, {w:"Kollege", a:"der", l:"A2"}, {w:"Kontakt", a:"der", l:"A2"},
    {w:"Konto", a:"das", l:"A2"}, {w:"Konzert", a:"das", l:"A2"}, {w:"Kosten", a:"die", l:"A2"},
    {w:"Kraft", a:"die", l:"A2"}, {w:"Krankenhaus", a:"das", l:"A2"}, {w:"Krankenkasse", a:"die", l:"A2"},
    {w:"Kreditkarte", a:"die", l:"A2"}, {w:"Kreis", a:"der", l:"A2"}, {w:"Kreuzung", a:"die", l:"A2"},
    {w:"Kühlschrank", a:"der", l:"A2"}, {w:"Kultur", a:"die", l:"A2"}, {w:"Kunde", a:"der", l:"A2"},
    {w:"Kurs", a:"der", l:"A2"}, {w:"Laden", a:"der", l:"A2"}, {w:"Lager", a:"das", l:"A2"},
    {w:"Lampe", a:"die", l:"A2"}, {w:"Laptop", a:"der", l:"A2"}, {w:"Leben", a:"das", l:"A2"},
    {w:"Leute", a:"die", l:"A2"}, {w:"Lied", a:"das", l:"A2"}, {w:"Loch", a:"das", l:"A2"},
    {w:"Löffel", a:"der", l:"A2"}, {w:"Lohn", a:"der", l:"A2"}, {w:"Lösung", a:"die", l:"A2"},
    {w:"Luft", a:"die", l:"A2"}, {w:"Lust", a:"die", l:"A2"}, {w:"Magen", a:"der", l:"A2"},
    {w:"Markt", a:"der", l:"A2"}, {w:"Maschine", a:"die", l:"A2"}, {w:"Material", a:"das", l:"A2"},
    {w:"Mechaniker", a:"der", l:"A2"}, {w:"Medikament", a:"das", l:"A2"}, {w:"Menge", a:"die", l:"A2"},
    {w:"Messer", a:"das", l:"A2"}, {w:"Miete", a:"die", l:"A2"}, {w:"Möbel", a:"die", l:"A2"},
    {w:"Motor", a:"der", l:"A2"}, {w:"Müll", a:"der", l:"A2"}, {w:"Museum", a:"das", l:"A2"},
    {w:"Nachbar", a:"der", l:"A2"}, {w:"Natur", a:"die", l:"A2"}, {w:"Nebel", a:"der", l:"A2"},
    {w:"Notfall", a:"der", l:"A2"}, {w:"Note", a:"die", l:"A2"}, {w:"Nudel", a:"die", l:"A2"},

    // --- LEVEL B1 (Society, Abstract, Emotions, Politics) ---
    {w:"Abfall", a:"der", l:"B1"}, {w:"Abgas", a:"das", l:"B1"}, {w:"Absicht", a:"die", l:"B1"},
    {w:"Abstimmung", a:"die", l:"B1"}, {w:"Altenheim", a:"das", l:"B1"}, {w:"Anfang", a:"der", l:"B1"},
    {w:"Angestellte", a:"der", l:"B1"}, {w:"Angst", a:"die", l:"B1"}, {w:"Ankunft", a:"die", l:"B1"},
    {w:"Anlass", a:"der", l:"B1"}, {w:"Anmeldung", a:"die", l:"B1"}, {w:"Anruf", a:"der", l:"B1"},
    {w:"Anspruch", a:"der", l:"B1"}, {w:"Anstrengung", a:"die", l:"B1"}, {w:"Antrag", a:"der", l:"B1"},
    {w:"Antwort", a:"die", l:"B1"}, {w:"Anzeige", a:"die", l:"B1"}, {w:"Apotheker", a:"der", l:"B1"},
    {w:"Apparat", a:"der", l:"B1"}, {w:"Arbeitsplatz", a:"der", l:"B1"}, {w:"Architekt", a:"der", l:"B1"},
    {w:"Ärger", a:"der", l:"B1"}, {w:"Armut", a:"die", l:"B1"}, {w:"Art", a:"die", l:"B1"},
    {w:"Artikel", a:"der", l:"B1"}, {w:"Asyl", a:"das", l:"B1"}, {w:"Atmosphäre", a:"die", l:"B1"},
    {w:"Atomkraft", a:"die", l:"B1"}, {w:"Aufenthalt", a:"der", l:"B1"}, {w:"Aufforderung", a:"die", l:"B1"},
    {w:"Aufgabe", a:"die", l:"B1"}, {w:"Aufnahme", a:"die", l:"B1"}, {w:"Aufregung", a:"die", l:"B1"},
    {w:"Auftrag", a:"der", l:"B1"}, {w:"Augenblick", a:"der", l:"B1"}, {w:"Ausbildung", a:"die", l:"B1"},
    {w:"Ausdruck", a:"der", l:"B1"}, {w:"Auskunft", a:"die", l:"B1"}, {w:"Ausnahme", a:"die", l:"B1"},
    {w:"Ausstellung", a:"die", l:"B1"}, {w:"Auswahl", a:"die", l:"B1"}, {w:"Auswirkung", a:"die", l:"B1"},
    {w:"Auto", a:"das", l:"B1"}, {w:"Autobahn", a:"die", l:"B1"}, {w:"Automat", a:"der", l:"B1"},
    {w:"Autor", a:"der", l:"B1"}, {w:"Backofen", a:"der", l:"B1"}, {w:"Badewanne", a:"die", l:"B1"},
    {w:"Bahn", a:"die", l:"B1"}, {w:"Bahnsteig", a:"der", l:"B1"}, {w:"Baustelle", a:"die", l:"B1"},
    {w:"Beamte", a:"der", l:"B1"}, {w:"Bedarf", a:"der", l:"B1"}, {w:"Bedienung", a:"die", l:"B1"},
    {w:"Bedingung", a:"die", l:"B1"}, {w:"Bedürfnis", a:"das", l:"B1"}, {w:"Befehl", a:"der", l:"B1"},
    {w:"Begegnung", a:"die", l:"B1"}, {w:"Beginn", a:"der", l:"B1"}, {w:"Begründung", a:"die", l:"B1"},
    {w:"Behörde", a:"die", l:"B1"}, {w:"Bein", a:"das", l:"B1"}, {w:"Beispiel", a:"das", l:"B1"},
    {w:"Beitrag", a:"der", l:"B1"}, {w:"Bekannte", a:"der", l:"B1"}, {w:"Beleg", a:"der", l:"B1"},
    {w:"Belohnung", a:"die", l:"B1"}, {w:"Bemühung", a:"die", l:"B1"}, {w:"Benzin", a:"das", l:"B1"},
    {w:"Beratung", a:"die", l:"B1"}, {w:"Bereich", a:"der", l:"B1"}, {w:"Bereitschaft", a:"die", l:"B1"},
    {w:"Bericht", a:"der", l:"B1"}, {w:"Beschluss", a:"der", l:"B1"}, {w:"Beschwerde", a:"die", l:"B1"},
    {w:"Besitz", a:"der", l:"B1"}, {w:"Besonderheit", a:"die", l:"B1"}, {w:"Bestätigung", a:"die", l:"B1"},
    {w:"Bestellung", a:"die", l:"B1"}, {w:"Besuch", a:"der", l:"B1"}, {w:"Betrieb", a:"der", l:"B1"},
    {w:"Betrug", a:"der", l:"B1"}, {w:"Bett", a:"das", l:"B1"}, {w:"Bevölkerung", a:"die", l:"B1"},
    {w:"Bewegung", a:"die", l:"B1"}, {w:"Beweis", a:"der", l:"B1"}, {w:"Bewerber", a:"der", l:"B1"},
    {w:"Beziehung", a:"die", l:"B1"}, {w:"Bibliothek", a:"die", l:"B1"}, {w:"Bildschirm", a:"der", l:"B1"},
    {w:"Bildung", a:"die", l:"B1"}, {w:"Biografie", a:"die", l:"B1"}, {w:"Biologie", a:"die", l:"B1"},
    {w:"Birne", a:"die", l:"B1"}, {w:"Bitte", a:"die", l:"B1"}, {w:"Blatt", a:"das", l:"B1"},
    {w:"Bleistift", a:"der", l:"B1"}, {w:"Blick", a:"der", l:"B1"}, {w:"Blitz", a:"der", l:"B1"},
    {w:"Blut", a:"das", l:"B1"}, {w:"Boden", a:"der", l:"B1"}, {w:"Bombe", a:"die", l:"B1"},
    {w:"Boot", a:"das", l:"B1"}, {w:"Botschaft", a:"die", l:"B1"}, {w:"Brand", a:"der", l:"B1"},
    {w:"Braten", a:"der", l:"B1"}, {w:"Brauch", a:"der", l:"B1"}, {w:"Briefkasten", a:"der", l:"B1"},
    {w:"Briefmarke", a:"die", l:"B1"}, {w:"Brieftasche", a:"die", l:"B1"}, {w:"Brille", a:"die", l:"B1"},
    {w:"Broschüre", a:"die", l:"B1"}, {w:"Brunnen", a:"der", l:"B1"}, {w:"Brust", a:"die", l:"B1"},
    {w:"Buchstabe", a:"der", l:"B1"}, {w:"Bühne", a:"die", l:"B1"}, {w:"Bund", a:"der", l:"B1"},
    {w:"Bundeskanzler", a:"der", l:"B1"}, {w:"Bürger", a:"der", l:"B1"}, {w:"Bürgermeister", a:"der", l:"B1"},

    // --- LEVEL B2 (Professional, Academic, Complex) ---
    {w:"Abhängigkeit", a:"die", l:"B2"}, {w:"Abkommen", a:"das", l:"B2"}, {w:"Absatz", a:"der", l:"B2"},
    {w:"Abschnitt", a:"der", l:"B2"}, {w:"Abwechslung", a:"die", l:"B2"}, {w:"Abwesenheit", a:"die", l:"B2"},
    {w:"Aktion", a:"die", l:"B2"}, {w:"Alternative", a:"die", l:"B2"}, {w:"Amt", a:"das", l:"B2"},
    {w:"Analyse", a:"die", l:"B2"}, {w:"Anforderung", a:"die", l:"B2"}, {w:"Angehörige", a:"der", l:"B2"},
    {w:"Angelegenheit", a:"die", l:"B2"}, {w:"Angriff", a:"der", l:"B2"}, {w:"Anlage", a:"die", l:"B2"},
    {w:"Anleitung", a:"die", l:"B2"}, {w:"Annahme", a:"die", l:"B2"}, {w:"Anpassung", a:"die", l:"B2"},
    {w:"Anschluss", a:"der", l:"B2"}, {w:"Ansehen", a:"das", l:"B2"}, {w:"Ansicht", a:"die", l:"B2"},
    {w:"Anspruch", a:"der", l:"B2"}, {w:"Anteil", a:"der", l:"B2"}, {w:"Anwendung", a:"die", l:"B2"},
    {w:"Anwesenheit", a:"die", l:"B2"}, {w:"Anzahl", a:"die", l:"B2"}, {w:"Argument", a:"das", l:"B2"},
    {w:"Armut", a:"die", l:"B2"}, {w:"Aspekt", a:"der", l:"B2"}, {w:"Auffassung", a:"die", l:"B2"},
    {w:"Aufmerksamkeit", a:"die", l:"B2"}, {w:"Aufnahme", a:"die", l:"B2"}, {w:"Auftritt", a:"der", l:"B2"},
    {w:"Aufwand", a:"der", l:"B2"}, {w:"Ausdruck", a:"der", l:"B2"}, {w:"Auseinandersetzung", a:"die", l:"B2"},
    {w:"Ausgabe", a:"die", l:"B2"}, {w:"Ausgleich", a:"der", l:"B2"}, {w:"Aussage", a:"die", l:"B2"},
    {w:"Aussicht", a:"die", l:"B2"}, {w:"Austausch", a:"der", l:"B2"}, {w:"Auswahl", a:"die", l:"B2"},
    {w:"Auswirkung", a:"die", l:"B2"}, {w:"Band", a:"das", l:"B2"}, {w:"Basis", a:"die", l:"B2"},
    {w:"Bau", a:"der", l:"B2"}, {w:"Bedeutung", a:"die", l:"B2"}, {w:"Bedrohung", a:"die", l:"B2"},
    {w:"Begeisterung", a:"die", l:"B2"}, {w:"Begriff", a:"der", l:"B2"}, {w:"Behandlung", a:"die", l:"B2"},
    {w:"Behauptung", a:"die", l:"B2"}, {w:"Behörde", a:"die", l:"B2"}, {w:"Beitrag", a:"der", l:"B2"},
    {w:"Belastung", a:"die", l:"B2"}, {w:"Beobachtung", a:"die", l:"B2"}, {w:"Beratung", a:"die", l:"B2"},
    {w:"Bereich", a:"der", l:"B2"}, {w:"Bereitschaft", a:"die", l:"B2"}, {w:"Bericht", a:"der", l:"B2"},
    {w:"Berücksichtigung", a:"die", l:"B2"}, {w:"Beschäftigung", a:"die", l:"B2"}, {w:"Beschreibung", a:"die", l:"B2"},
    {w:"Beschwerde", a:"die", l:"B2"}, {w:"Bestandteil", a:"der", l:"B2"}, {w:"Bestätigung", a:"die", l:"B2"},
    {w:"Beteiligung", a:"die", l:"B2"}, {w:"Betrachtung", a:"die", l:"B2"}, {w:"Betrag", a:"der", l:"B2"},
    {w:"Betreuung", a:"die", l:"B2"}, {w:"Beurteilung", a:"die", l:"B2"}, {w:"Bevölkerung", a:"die", l:"B2"},
    {w:"Bewegung", a:"die", l:"B2"}, {w:"Beweis", a:"der", l:"B2"}, {w:"Bewertung", a:"die", l:"B2"},
    {w:"Bewusstsein", a:"das", l:"B2"}, {w:"Beziehung", a:"die", l:"B2"}, {w:"Bezirk", a:"der", l:"B2"},
    {w:"Bilanz", a:"die", l:"B2"}, {w:"Bildung", a:"die", l:"B2"}, {w:"Bindung", a:"die", l:"B2"},
    {w:"Blick", a:"der", l:"B2"}, {w:"Botschaft", a:"die", l:"B2"}, {w:"Branche", a:"die", l:"B2"},
    {w:"Budget", a:"das", l:"B2"}, {w:"Bündnis", a:"das", l:"B2"}, {w:"Bürger", a:"der", l:"B2"},
    {w:"Charakter", a:"der", l:"B2"}, {w:"Chance", a:"die", l:"B2"}, {w:"Chaos", a:"das", l:"B2"},
    {w:"Computer", a:"der", l:"B2"}, {w:"Dank", a:"der", l:"B2"}, {w:"Darstellung", a:"die", l:"B2"},
    {w:"Dauer", a:"die", l:"B2"}, {w:"Debatte", a:"die", l:"B2"}, {w:"Deckung", a:"die", l:"B2"},
    {w:"Defizit", a:"das", l:"B2"}, {w:"Definition", a:"die", l:"B2"}, {w:"Demokratie", a:"die", l:"B2"},
    {w:"Denken", a:"das", l:"B2"}, {w:"Detail", a:"das", l:"B2"}, {w:"Diagnose", a:"die", l:"B2"},
    {w:"Dialog", a:"der", l:"B2"}, {w:"Differenz", a:"die", l:"B2"}, {w:"Dimension", a:"die", l:"B2"},
    {w:"Diskussion", a:"die", l:"B2"}, {w:"Distanz", a:"die", l:"B2"}, {w:"Dokument", a:"das", l:"B2"},
    {w:"Dosis", a:"die", l:"B2"}, {w:"Druck", a:"der", l:"B2"}, {w:"Durchschnitt", a:"der", l:"B2"}
];

let activeWords = [];
let currentIndex = 0;
let stats = { ok: 0, bad: 0, streak: 0 };
let isLock = false;
let activeUnit = null;
let prevUnit = null;

const levelSelector = document.getElementById('levelSelector');

function loadLevel(level) {
    if (level === "ALL") {
        activeWords = [...rawData];
    } else {
        activeWords = rawData.filter(item => item.l === level);
    }
    document.getElementById('levelCount').innerText = activeWords.length;
    shuffle(activeWords);
    currentIndex = 0;
    
    // Clear and reset the reel
    document.getElementById('reel').innerHTML = '';
    prevUnit = null;
    spawnWord("pos-active");
    currentIndex++;
    spawnWord("pos-next");
}

function shuffle(a) {
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
}

function spawnWord(startPos) {
    const reel = document.getElementById('reel');
    const data = activeWords[currentIndex % activeWords.length];
    const unit = document.createElement('div');
    unit.className = `slot-unit ${startPos}`;
    unit.innerHTML = `<span class="article-reveal">${data.a}</span><span class="word-span">${data.w}</span>`;
    reel.appendChild(unit);
    if (startPos === "pos-active") activeUnit = unit;
    return unit;
}

function handleChoice(choice) {
    if (isLock || activeWords.length === 0) return;
    const currentData = activeWords[(currentIndex - 1) % activeWords.length];
    const correctArt = currentData.a;
    const isRight = choice === correctArt;

    if (!isRight) {
        activeUnit.classList.add('shake-active');
        setTimeout(() => activeUnit.classList.remove('shake-active'), 300);
        stats.bad++;
        stats.streak = 0;
        updateScore();
        return;
    }

    isLock = true;
    stats.ok++;
    stats.streak++;
    updateScore();

    activeUnit.classList.add('resolved');
    activeUnit.style.color = `var(--${correctArt})`;

    setTimeout(() => {
        const nextInLine = document.querySelector('.pos-next');
        if (prevUnit) {
            prevUnit.className = 'slot-unit pos-exit';
            const toDelete = prevUnit;
            setTimeout(() => toDelete.remove(), 700);
        }
        prevUnit = activeUnit;
        prevUnit.className = 'slot-unit pos-prev resolved'; 
        activeUnit = nextInLine;
        activeUnit.className = 'slot-unit pos-active';
        currentIndex++;
        spawnWord("pos-next");
        isLock = false;
    }, 900);
}

function updateScore() {
    document.getElementById('scoreOk').innerText = stats.ok;
    document.getElementById('scoreBad').innerText = stats.bad;
    document.getElementById('streak').innerText = stats.streak;
}

levelSelector.addEventListener('change', (e) => loadLevel(e.target.value));

window.onkeydown = (e) => {
    const key = e.key.toLowerCase();
    if (key === 'a') handleChoice('der');
    if (key === 's') handleChoice('die');
    if (key === 'd') handleChoice('das');
};

// Start default level
loadLevel("A1");
updateScore();

</script>
</body>
</html>
